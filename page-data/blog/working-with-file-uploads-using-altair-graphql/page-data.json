{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/working-with-file-uploads-using-altair-graphql/","result":{"data":{"site":{"siteMetadata":{"title":"XKoji.dev","siteUrl":"https://www.xkoji.dev"}},"markdownRemark":{"id":"66c6e370-4ba3-599c-8493-68d23b01be52","excerpt":"Itâ€™s no news that GraphQL is still the new kid on the block and has come to stay (donâ€™t worry REST APIs still have their place ðŸ˜„). As the GraphQL communityâ€¦","html":"<p>Itâ€™s no news that GraphQL is still the new kid on the block and has come to stay (donâ€™t worry REST APIs still have their place ðŸ˜„). As the GraphQL community grows and the specification is developed, there remains a few questions yet to be answered. One of such questions was about file uploads.</p>\n<p><strong><em>How do we upload files using GraphQL?</em></strong></p>\n<p><strong><em>Are there any guidelines for uploading files using GraphQL?</em></strong></p>\n<p>Well there isnâ€™t one from the <a href=\"https://github.com/graphql/graphql-spec\">GraphQL team</a> yet. So it is still left to you to define how you would want to handle file (binary data) uploads. You could always encode the data as base64 and pass the encoded string along to the server. You could also upload the files to a cloud storage service (or any other storage service) from the client and just pass the URL returned from the storage service through a GraphQL mutation. Whichever option you choose, itâ€™s not ideal to work that way, especially considering that traditional methods of posting data to the server (submitting a form, sending a form data to an API) are more efficient in handling file uploads. So why would GraphQL be less efficient?</p>\n<p>I can only assume, but I guess that was the question Jayden had in mind when he created the <a href=\"https://github.com/jaydenseric/graphql-multipart-request-spec\">GraphQL multipart request specification</a>. From the spec readme, the specification is:</p>\n<blockquote>\n<p>An interoperable multipart form field structure for GraphQL requests, used by various file upload client/server implementations.</p>\n<p>Itâ€™s possible to implement:</p>\n<p>Nesting files anywhere within operations (usually in variables).</p>\n<p>Operation batching.</p>\n<p>File deduplication.</p>\n<p>File upload streams in resolvers.</p>\n<p>Aborting file uploads in resolvers.</p>\n</blockquote>\n<p>TL;DR, the specification enables you to upload files using the multipart format, which was designed for sending binary data through HTTP from the client to the server. There are several <a href=\"https://github.com/jaydenseric/graphql-multipart-request-spec#implementations\">library implementations</a> of this GraphQL spec already in Node.js, PHP, Python, Go and Ruby, so should be easy to implement without having to create it from scratch.\n<a href=\"https://altair.sirmuel.design/\">Altair GraphQL Client</a> (from v2.0.5) now allows you to upload files to your server if you have implemented the GraphQL multipart request spec in your server. It supports uploading both single files and an array of files (using the dot notation e.g. for an array named <code class=\"language-text\">fileList</code>, you define the files as <code class=\"language-text\">fileList.0</code>, <code class=\"language-text\">fileList.1</code>, <code class=\"language-text\">fileList.2</code> and so on).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da9a8e9e6bb790432e84790776b57f75/97a96/singlefile.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22543352601156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABL0lEQVQoz5WSa07DMBCEc6Ymdvzc+BEncdKWCgkJOEMF4hxcmokjqlLgR6WxFHvn212vU3FhG6GYtL6fIE1R2WC6/kY4h8p36vfD++fry/lYAWbCGPLWRXK9NI4JDVM/LHFYfIJmCqPQXdNqiAvDpdGuk5Yqhr3qbJhCypoCwjsmNfWnfDiMc0p5SLlPWRjPtVt5rmqudkzVTFUlEzFKigKy7LgscDzm/cO0gJ82WLu6tXUhL6rQc9OqWhCSAStZJdpeew6jj1MXMYsV3qI/4K0OroqWSiLTcG0oAnBx+lZW1tf8F4xV5jx3YdxEfkDla/jfyljWpc0U0gwf+DvhYoUD2H2VtUuI4SXPbx+PT88YPqYA5nIRl5a/4VbR9vrQkPf4VWBi6/vZKxFObkjoCzl1nqQMb0wuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Adding file for upload (singleÂ file)\"\n        title=\"Adding file for upload (singleÂ file)\"\n        src=\"/static/da9a8e9e6bb790432e84790776b57f75/1e043/singlefile.png\"\n        srcset=\"/static/da9a8e9e6bb790432e84790776b57f75/991de/singlefile.png 173w,\n/static/da9a8e9e6bb790432e84790776b57f75/e4d6b/singlefile.png 345w,\n/static/da9a8e9e6bb790432e84790776b57f75/1e043/singlefile.png 690w,\n/static/da9a8e9e6bb790432e84790776b57f75/e3189/singlefile.png 1035w,\n/static/da9a8e9e6bb790432e84790776b57f75/b1001/singlefile.png 1380w,\n/static/da9a8e9e6bb790432e84790776b57f75/97a96/singlefile.png 2400w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f12257fd1c2f773f795e1ea38329ef6f/97a96/multiplefiles.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22543352601156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABd0lEQVQoz3WS207DMAyG90qwNk2yHJtDm2RtBwMJuENC4gaJF0CIe54K7cX424GYEEhu2rr+bP92V4TKinLChHG99WmjHJctTqG9MGE+F4Pny6mD38bn97vbp3FFqKiopDpq3zNpq2azJlwa70N2sdhQ2lh029GNWTcCXxFfM8GNZlKtarxQQVQkXAODneOjdkOZtl1xHu30LiQqDOHqmHqJ4euaL5Xh+vYeYXRexv3FsJtiyjH5kJiwNdeIrE4i58pnFQVwCkNeHi53eSwx9TEf4Ua6WlimJOFf/GoJbbmwa4Ks6ELgAZrzuJ+20xBTDMm6HvA5gLlHXjXflXHZWVjGVDBwmLJRmnAxXd4Mu6u+DF0Gj4GddvcDS+2xJBiXDiSyKBu2ZRrzmALaTs7/D29MoBAj9P3D47i7xsqRwoYs2067Xi/7/xvG9KAQUhumPg6Hl9c3wiR+hlkChIDHGcrfcMMVbsdRGdehLILmzTN5YgqeXyTsE/88oYBzgn6hAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Adding files for upload (list ofÂ files)\"\n        title=\"Adding files for upload (list ofÂ files)\"\n        src=\"/static/f12257fd1c2f773f795e1ea38329ef6f/1e043/multiplefiles.png\"\n        srcset=\"/static/f12257fd1c2f773f795e1ea38329ef6f/991de/multiplefiles.png 173w,\n/static/f12257fd1c2f773f795e1ea38329ef6f/e4d6b/multiplefiles.png 345w,\n/static/f12257fd1c2f773f795e1ea38329ef6f/1e043/multiplefiles.png 690w,\n/static/f12257fd1c2f773f795e1ea38329ef6f/e3189/multiplefiles.png 1035w,\n/static/f12257fd1c2f773f795e1ea38329ef6f/b1001/multiplefiles.png 1380w,\n/static/f12257fd1c2f773f795e1ea38329ef6f/97a96/multiplefiles.png 2400w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You add your files in the variables pane, and the files are added to the request as variables when the request is sent to the server.</p>\n<p><em><strong>Note:</strong> The files donâ€™t persist if you reload Altair, so you would have to select them again.</em></p>\n<h4>Feedback</h4>\n<p>Do you like this feature? Do you think it can be improved? Did you find a bug? Let me know what you think. Create <a href=\"https://github.com/imolorhe/altair/issues/new/choose\">an issue</a> on Github or add a comment to <a href=\"https://github.com/imolorhe/altair/issues/537\">this issue</a>.</p>","frontmatter":{"title":"Working with file uploads using Altair GraphQL","date":"May 06, 2020","description":"","image":null}}},"pageContext":{"slug":"/blog/working-with-file-uploads-using-altair-graphql/","previous":{"fields":{"slug":"/blog/local-vs-global-npm-dependencies/"},"frontmatter":{"title":"Local vs global npm dependencies"}},"next":null}}}