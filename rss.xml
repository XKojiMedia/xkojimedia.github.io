<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[XKoji.dev]]></title><description><![CDATA[Website for all things XkojiMedia]]></description><link>https://www.xkoji.dev</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 11 May 2020 17:32:56 GMT</lastBuildDate><item><title><![CDATA[Working with file uploads using Altair GraphQL]]></title><description><![CDATA[It‚Äôs no news that GraphQL is still the new kid on the block and has come to stay (don‚Äôt worry REST APIs still have their place üòÑ). As the‚Ä¶]]></description><link>https://www.xkoji.dev/blog/working-with-file-uploads-using-altair-graphql/</link><guid isPermaLink="false">https://www.xkoji.dev/blog/working-with-file-uploads-using-altair-graphql/</guid><pubDate>Wed, 06 May 2020 21:21:04 GMT</pubDate><content:encoded>&lt;p&gt;It‚Äôs no news that GraphQL is still the new kid on the block and has come to stay (don‚Äôt worry REST APIs still have their place üòÑ). As the GraphQL community grows and the specification is developed, there remains a few questions yet to be answered. One of such questions was about file uploads.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;How do we upload files using GraphQL?&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Are there any guidelines for uploading files using GraphQL?&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Well there isn‚Äôt one from the &lt;a href=&quot;https://github.com/graphql/graphql-spec&quot;&gt;GraphQL team&lt;/a&gt; yet. So it is still left to you to define how you would want to handle file (binary data) uploads. You could always encode the data as base64 and pass the encoded string along to the server. You could also upload the files to a cloud storage service (or any other storage service) from the client and just pass the URL returned from the storage service through a GraphQL mutation. Whichever option you choose, it‚Äôs not ideal to work that way, especially considering that traditional methods of posting data to the server (submitting a form, sending a form data to an API) are more efficient in handling file uploads. So why would GraphQL be less efficient?&lt;/p&gt;
&lt;p&gt;I can only assume, but I guess that was the question Jayden had in mind when he created the &lt;a href=&quot;https://github.com/jaydenseric/graphql-multipart-request-spec&quot;&gt;GraphQL multipart request specification&lt;/a&gt;. From the spec readme, the specification is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An interoperable multipart form field structure for GraphQL requests, used by various file upload client/server implementations.&lt;/p&gt;
&lt;p&gt;It‚Äôs possible to implement:&lt;/p&gt;
&lt;p&gt;Nesting files anywhere within operations (usually in variables).&lt;/p&gt;
&lt;p&gt;Operation batching.&lt;/p&gt;
&lt;p&gt;File deduplication.&lt;/p&gt;
&lt;p&gt;File upload streams in resolvers.&lt;/p&gt;
&lt;p&gt;Aborting file uploads in resolvers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;TL;DR, the specification enables you to upload files using the multipart format, which was designed for sending binary data through HTTP from the client to the server. There are several &lt;a href=&quot;https://github.com/jaydenseric/graphql-multipart-request-spec#implementations&quot;&gt;library implementations&lt;/a&gt; of this GraphQL spec already in Node.js, PHP, Python, Go and Ruby, so should be easy to implement without having to create it from scratch.
&lt;a href=&quot;https://altair.sirmuel.design/&quot;&gt;Altair GraphQL Client&lt;/a&gt; (from v2.0.5) now allows you to upload files to your server if you have implemented the GraphQL multipart request spec in your server. It supports uploading both single files and an array of files (using the dot notation e.g. for an array named &lt;code class=&quot;language-text&quot;&gt;fileList&lt;/code&gt;, you define the files as &lt;code class=&quot;language-text&quot;&gt;fileList.0&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;fileList.1&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;fileList.2&lt;/code&gt; and so on).&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABL0lEQVQoz5WSa07DMBCEc6Ymdvzc+BEncdKWCgkJOEMF4hxcmokjqlLgR6WxFHvn212vU3FhG6GYtL6fIE1R2WC6/kY4h8p36vfD++fry/lYAWbCGPLWRXK9NI4JDVM/LHFYfIJmCqPQXdNqiAvDpdGuk5Yqhr3qbJhCypoCwjsmNfWnfDiMc0p5SLlPWRjPtVt5rmqudkzVTFUlEzFKigKy7LgscDzm/cO0gJ82WLu6tXUhL6rQc9OqWhCSAStZJdpeew6jj1MXMYsV3qI/4K0OroqWSiLTcG0oAnBx+lZW1tf8F4xV5jx3YdxEfkDla/jfyljWpc0U0gwf+DvhYoUD2H2VtUuI4SXPbx+PT88YPqYA5nIRl5a/4VbR9vrQkPf4VWBi6/vZKxFObkjoCzl1nqQMb0wuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Adding file for upload (single¬†file)&quot;
        title=&quot;Adding file for upload (single¬†file)&quot;
        src=&quot;/static/da9a8e9e6bb790432e84790776b57f75/c1b63/singlefile.png&quot;
        srcset=&quot;/static/da9a8e9e6bb790432e84790776b57f75/5a46d/singlefile.png 300w,
/static/da9a8e9e6bb790432e84790776b57f75/0a47e/singlefile.png 600w,
/static/da9a8e9e6bb790432e84790776b57f75/c1b63/singlefile.png 1200w,
/static/da9a8e9e6bb790432e84790776b57f75/d61c2/singlefile.png 1800w,
/static/da9a8e9e6bb790432e84790776b57f75/97a96/singlefile.png 2400w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABd0lEQVQoz3WS207DMAyG90qwNk2yHJtDm2RtBwMJuENC4gaJF0CIe54K7cX424GYEEhu2rr+bP92V4TKinLChHG99WmjHJctTqG9MGE+F4Pny6mD38bn97vbp3FFqKiopDpq3zNpq2azJlwa70N2sdhQ2lh029GNWTcCXxFfM8GNZlKtarxQQVQkXAODneOjdkOZtl1xHu30LiQqDOHqmHqJ4euaL5Xh+vYeYXRexv3FsJtiyjH5kJiwNdeIrE4i58pnFQVwCkNeHi53eSwx9TEf4Ua6WlimJOFf/GoJbbmwa4Ks6ELgAZrzuJ+20xBTDMm6HvA5gLlHXjXflXHZWVjGVDBwmLJRmnAxXd4Mu6u+DF0Gj4GddvcDS+2xJBiXDiSyKBu2ZRrzmALaTs7/D29MoBAj9P3D47i7xsqRwoYs2067Xi/7/xvG9KAQUhumPg6Hl9c3wiR+hlkChIDHGcrfcMMVbsdRGdehLILmzTN5YgqeXyTsE/88oYBzgn6hAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Adding files for upload (list of¬†files)&quot;
        title=&quot;Adding files for upload (list of¬†files)&quot;
        src=&quot;/static/f12257fd1c2f773f795e1ea38329ef6f/c1b63/multiplefiles.png&quot;
        srcset=&quot;/static/f12257fd1c2f773f795e1ea38329ef6f/5a46d/multiplefiles.png 300w,
/static/f12257fd1c2f773f795e1ea38329ef6f/0a47e/multiplefiles.png 600w,
/static/f12257fd1c2f773f795e1ea38329ef6f/c1b63/multiplefiles.png 1200w,
/static/f12257fd1c2f773f795e1ea38329ef6f/d61c2/multiplefiles.png 1800w,
/static/f12257fd1c2f773f795e1ea38329ef6f/97a96/multiplefiles.png 2400w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;You add your files in the variables pane, and the files are added to the request as variables when the request is sent to the server.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt; The files don‚Äôt persist if you reload Altair, so you would have to select them again.&lt;/em&gt;&lt;/p&gt;
&lt;h4&gt;Feedback&lt;/h4&gt;
&lt;p&gt;Do you like this feature? Do you think it can be improved? Did you find a bug? Let me know what you think. Create &lt;a href=&quot;https://github.com/imolorhe/altair/issues/new/choose&quot;&gt;an issue&lt;/a&gt; on Github or add a comment to &lt;a href=&quot;https://github.com/imolorhe/altair/issues/537&quot;&gt;this issue&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Local vs global npm dependencies]]></title><description><![CDATA[Working on Node.js based applications usually requires you to install dependencies that are needed to provide functionality within the‚Ä¶]]></description><link>https://www.xkoji.dev/blog/local-vs-global-npm-dependencies/</link><guid isPermaLink="false">https://www.xkoji.dev/blog/local-vs-global-npm-dependencies/</guid><pubDate>Mon, 04 May 2020 19:49:11 GMT</pubDate><content:encoded>&lt;p&gt;Working on Node.js based applications usually requires you to install dependencies that are needed to provide functionality within the project, either for development or as part of the project logic at runtime. A number of the development dependencies provide a command line interface for interacting with the package and making use of the functionality for things like scaffolding, compiling, bundling, publishing, etc.&lt;/p&gt;
&lt;p&gt;For these CLI-based dependencies, the author usually recommends installing the packages globally, for ease of use. However there are benefits to installing these dependencies locally instead of globally, which might not be immediately obvious.&lt;/p&gt;
&lt;h3&gt;All project dependencies declared in a single place&lt;/h3&gt;
&lt;p&gt;Whenever you install local dependencies, they are listed in the package.json file which acts as a manifest showing all the information about a package, including the dependencies it needs. This means if you install your global dependencies locally, it becomes obvious what all the dependencies of the project are.&lt;/p&gt;
&lt;p&gt;For instance, assuming you have a project that uses typescript, you can install the typescript CLI package globally (&lt;code class=&quot;language-text&quot;&gt;yarn global add typescript&lt;/code&gt;) and call &lt;code class=&quot;language-text&quot;&gt;tsc path/to/project&lt;/code&gt; whenever you want to compile the code. Now you might even add a script in the package.json file for this, so it‚Äôs more obvious to you and any other people working on the project what command to run to compile.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;compile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tsc .&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However imagine you decide to work on this project on another computer, or some other person tries to work on the same project in their own machine. After installing the dependencies (&lt;code class=&quot;language-text&quot;&gt;yarn install&lt;/code&gt;), running the compile script would fail on the first attempt because yarn can‚Äôt find the &lt;code class=&quot;language-text&quot;&gt;tsc&lt;/code&gt; command. You then need to install typescript globally on that machine as well to continue working on the project. Now imagine typescript now has several major updates and now the latest version is not backward compatible with the version of typescript used in the project initially. You would get another error and would have to start troubleshooting to figure out what exact version of typescript you need to install to get this working.&lt;/p&gt;
&lt;p&gt;On the other hand, installing the &lt;code class=&quot;language-text&quot;&gt;typescript&lt;/code&gt; package as a local dependency (&lt;code class=&quot;language-text&quot;&gt;yarn add --dev typescript&lt;/code&gt;) would mean, any one that runs &lt;code class=&quot;language-text&quot;&gt;yarn install&lt;/code&gt; in that project would also install typescript automatically (and the right version as well), and the compile script would just work as expected.&lt;/p&gt;
&lt;h3&gt;Multiple projects with different versions on same machine&lt;/h3&gt;
&lt;p&gt;As a developer working on Node.js based projects, you likely have multiple projects on your local machine that you work on at different times. Assuming several of these projects use typescript, and you install typescript globally. You worked on project X a couple of months back when typescript was at version 2.7.1. You haven‚Äôt worked on it in a while.&lt;/p&gt;
&lt;p&gt;You get started working on another project Y that uses the latest stack features (react hooks, latest typescript esnext features, bells and whistles). Project Y needs at least typescript@3.8.3 for it to compile properly. You try compiling the project and you get an error because typescript doesn‚Äôt understand the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator&quot;&gt;nullish coalescing operator&lt;/a&gt;. Now you‚Äôre wondering why this project worked in your colleague‚Äôs machine but isn‚Äôt working on yours. After a couple of hours debugging, you realize your global typescript version is at 2.7.1. You decide to update the global typescript package. Project Y compiles! That‚Äôs great news.&lt;/p&gt;
&lt;p&gt;Things move along quickly and now you have some tasks to implement in Project X. You open it up in your editor, make the changes and compile. Now there are several typescript linting errors that weren‚Äôt there before. You only changed 2 lines of code but typescript isn‚Äôt compiling because of errors in an entirely different file you didn‚Äôt touch. After several hours of debugging, you realize that you are using typescript@3.8.3 but the project was built with typescript@2.7.1. You now have two choices: forcefully fix the code and update it to use the latest version of typescript, or you downgrade typescript to 2.7.1. You quickly figure out that none of these options is good enough üòû&lt;/p&gt;
&lt;p&gt;Imagine the same scenario but you are using a locally installed typescript dependency in both Project X and Project Y. You wouldn‚Äôt have any of the issue above because each project would have its own version of typescript to work with, without affecting the other project.&lt;/p&gt;
&lt;h2&gt;Using local dependencies from CLI&lt;/h2&gt;
&lt;p&gt;One of the advantages you would usually see with global dependencies over local dependencies is that: you can just call the command of a global dependency from the command line, but you can‚Äôt do the same with local dependencies. Using the previous example of typescript. If you installed typescript globally, you can just run the following from anywhere and it would work:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;tsc /path/to/project&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can‚Äôt do the same with local dependencies. However if you manage your dependencies with &lt;a href=&quot;https://yarnpkg.com/&quot;&gt;yarn&lt;/a&gt;, you can run a local command in a similar way with yarn. The equivalent of that command would be:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; tsc &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, you need to run this command from within the project working directory for yarn to be able to find the local dependency to run.&lt;/p&gt;
&lt;p&gt;In my personal opinion, this is a relatively small issue that can be worked around compared to the benefits of local dependencies.&lt;/p&gt;
&lt;p&gt;You also have the option of adding the command as a script in the package.json file, in which case you can run it with both yarn and npm.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;compile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;tsc&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can run it using &lt;code class=&quot;language-text&quot;&gt;yarn compile&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;npm run compile&lt;/code&gt;. This would execute the &lt;code class=&quot;language-text&quot;&gt;tsc&lt;/code&gt; command from the local dependencies of the project, if available.&lt;/p&gt;
&lt;h2&gt;When to use global dependencies&lt;/h2&gt;
&lt;p&gt;While I generally recommend using local dependencies, I have to say that there are some cases where you need global dependencies.&lt;/p&gt;
&lt;h3&gt;Scaffolding the project&lt;/h3&gt;
&lt;p&gt;When you need a package to scaffold a project, you don‚Äôt have a project yet and so no package.json file to have local dependencies in. In such cases, you need to install the packages as a global dependency. Examples of these are: angular CLI for scaffolding angular projects (&lt;code class=&quot;language-text&quot;&gt;ng new project-name&lt;/code&gt;), create-react-app for scaffolding react projects (&lt;code class=&quot;language-text&quot;&gt;create-react-app project-name&lt;/code&gt;), vue CLI for scaffolding Vue.js applications (&lt;code class=&quot;language-text&quot;&gt;vue create project-name&lt;/code&gt;), and the many others. These commands create the project directory as well as creating the package.json file and installing the dependencies for you. Usually they would install the dependencies locally as well for scaffolding other part of the project (like components, routing, styles, etc) so you don‚Äôt depend on the global dependency for that.&lt;/p&gt;
&lt;h3&gt;Running task-specific, project-agnostic commands&lt;/h3&gt;
&lt;p&gt;There are a number of dependencies that are used to perform tasks that are not specific to any project. These commands are similar in function to the other commands you have available to you in the command line. They provide utilities that can be used in a wide range of cases. For example, starting up a simple local server with &lt;a href=&quot;https://www.npmjs.com/package/serve&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;serve&lt;/code&gt;&lt;/a&gt;, getting help about other commands with &lt;a href=&quot;https://www.npmjs.com/package/tldr&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;tldr&lt;/code&gt;&lt;/a&gt;, and many others. These commands provide general utility functionality and as such are better off installed globally.&lt;/p&gt;
&lt;h2&gt;Bonus tip: using &lt;code class=&quot;language-text&quot;&gt;npx&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;yarn dlx&lt;/code&gt; for one-time global packages&lt;/h2&gt;
&lt;p&gt;Like I mentioned above, there are times when you need to install packages globally. However, there are some packages that you don‚Äôt need to keep installed always, especially if you just need to run the command once as opposed to using it frequently. Examples of such packages would be the scaffolding packages and some others (like starting up a local server). Depending on the kind of tasks you work on, these are not packages you might need to have installed on your machine always. More often than not, you just scaffold a project one time and proceed with developing the project without needing the scaffolding functionality afterwards.&lt;/p&gt;
&lt;p&gt;For these cases, you can make use of the &lt;code class=&quot;language-text&quot;&gt;npx&lt;/code&gt; command (provided by npm), or the &lt;code class=&quot;language-text&quot;&gt;yarn dlx&lt;/code&gt; command (available in &lt;strong&gt;yarn v2&lt;/strong&gt;, not yarn v1). For example if you wanted to scaffold a react app, you can run &lt;code class=&quot;language-text&quot;&gt;npx create-react-app project-name&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;yarn dlx create-react-app project-name&lt;/code&gt; and this would temporarily download the &lt;code class=&quot;language-text&quot;&gt;create-react-app&lt;/code&gt; dependency and execute the command to scaffold the project, without installing the package globally in your machine.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;Preferring locally installed dependencies over global dependencies provide a number of benefits that would be helpful as the number of projects and complexity of the projects increases. Also consider executing the dependencies without installing them using &lt;code class=&quot;language-text&quot;&gt;npx&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;yarn dlx&lt;/code&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Automate scaffolding processes with Plop]]></title><description><![CDATA[I recently published a post detailing how I created this blog using Gatsby to get up and running in little time. Gatsby as a static site‚Ä¶]]></description><link>https://www.xkoji.dev/blog/automate-scaffolding-processes-with-plop/</link><guid isPermaLink="false">https://www.xkoji.dev/blog/automate-scaffolding-processes-with-plop/</guid><pubDate>Sun, 03 May 2020 22:11:45 GMT</pubDate><content:encoded>&lt;p&gt;I recently published a &lt;a href=&quot;https://www.xkoji.dev/blog/set-up-a-blog-with-gatsby-github-pages-and-github-actions/&quot;&gt;post detailing how I created this blog using Gatsby&lt;/a&gt; to get up and running in little time. Gatsby as a static site generator does a lot of useful things for you through the rich plugin ecosystem that it has, enabling you do things like creating a blog like this one. However the process of creating a new blog post isn‚Äôt as easy as opening a new URL. You have to create the markdown files and directories yourself manually. This might be okay at first but quickly becomes monotonous, and you know what they say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If a task doesn‚Äôt require critical thinking, doesn‚Äôt require human input, monotonous, repetitive,&lt;/p&gt;
&lt;p&gt;Why not automate it?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This quote aligns very much with most of us developers, and that‚Äôs exactly what we are going to do! üòÅ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://plopjs.com/&quot;&gt;Plop&lt;/a&gt;&lt;/strong&gt; is a tool that was built with the intention of solving these kinds of problems. Quoting the plop site,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Plop is a little tool that saves you time and helps your team build new files with consistency.&lt;/p&gt;
&lt;p&gt;Plop generates code when you want, how you want, and can be changed whenever you want.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;‚ÄúWhat about &lt;a href=&quot;https://yeoman.io/&quot;&gt;yeoman&lt;/a&gt;?‚Äù&lt;/strong&gt;, you might ask. Yeoman looks to be tuned towards scaffolding entire web apps as opposed to scaffolding little bits of the app. Although yeoman generators can also generate the little bits of the app as well, those come as added benefits to the full app generator. Also yeoman generators need to be used as an extra node package that would be installed as a dependency (either by publishing it or locally by &lt;a href=&quot;https://classic.yarnpkg.com/en/docs/cli/link/&quot;&gt;linking it&lt;/a&gt;) before it can be used. That‚Äôs a lot more setup than is required. On the other hand, plop only really needs a &lt;code class=&quot;language-text&quot;&gt;plopfile.js&lt;/code&gt; file at the root of your project, and for plop to be installed as a dependency.&lt;/p&gt;
&lt;p&gt;Here I‚Äôll describe how I used plop to automate scaffolding a new blog post.&lt;/p&gt;
&lt;p&gt;First let‚Äôs define the specifics of what we need:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The posts are stored in &lt;code class=&quot;language-text&quot;&gt;content/blog/&lt;/code&gt; with directories describing the post &lt;em&gt;slug&lt;/em&gt;, and an &lt;code class=&quot;language-text&quot;&gt;index.md&lt;/code&gt; file. For example, &lt;code class=&quot;language-text&quot;&gt;content/blog/hello-world/index.md&lt;/code&gt; &lt;em&gt;You can check the &lt;a href=&quot;https://www.xkoji.dev/blog/set-up-a-blog-with-gatsby-github-pages-and-github-actions/&quot;&gt;previous post&lt;/a&gt; to see how we set this up or you can follow along using &lt;a href=&quot;https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/&quot;&gt;this Gatsby starter&lt;/a&gt;.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Each post written in markdown contains frontmatter used to describe the post and specify metadata about the post like the title, date, tags and the author. All of that data needs to be provided by the user except perhaps the date, since you would usually use today‚Äôs date there. That‚Äôs pretty much all the information we need to have a new post.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To get started with plop, make sure you install it using &lt;code class=&quot;language-text&quot;&gt;yarn add --dev plop&lt;/code&gt;. The plop docs recommend installing plop globally in your system, but I would recommend installing it locally since it is a dependency of one project, and not necessarily required to be a global package. &lt;em&gt;For this post, I would be assuming you have plop installed as a local dependency.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Now create a &lt;code class=&quot;language-text&quot;&gt;plopfile.js&lt;/code&gt; file with the following content:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/** @type {import(&apos;plop&apos;).NodePlopAPI} */&lt;/span&gt;
  plop
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  plop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHelper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;slug&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;val &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/[^A-Za-z0-9_]/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  plop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHelper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;yamlCommaToList&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;val &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[ &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; _&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;, &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; ]&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  plop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    description&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;New blog post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    prompts&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;postTitle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      message&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Title of blog post:&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;twitterHandle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      message&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Twitter handle of author:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;tags&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      message&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Specify list of tags:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;add&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;content/blog/{{slug postTitle}}/index.md&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      templateFile&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.plop/templates/post-md.hbs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token function-variable function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; date &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          todayDate&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toISOString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For the most part, this is straightforward what is going on here (you should check the &lt;a href=&quot;https://plopjs.com/documentation/&quot;&gt;docs&lt;/a&gt; for some more detailed documentation on the API). I‚Äôll explain what is going on here.&lt;/p&gt;
&lt;p&gt;Plopfiles are simple node ‚Äúmodules‚Äù that export a function. This function takes the &lt;code class=&quot;language-text&quot;&gt;plop&lt;/code&gt; object, giving access to the plop API.
&lt;code class=&quot;language-text&quot;&gt;plop.setHelper()&lt;/code&gt; provides an interface to register a &lt;a href=&quot;http://handlebarsjs.com/api-reference/runtime.html#handlebars-registerhelper-name-helper&quot;&gt;handlebars helper&lt;/a&gt;. That‚Äôs right - Plop uses &lt;a href=&quot;http://handlebarsjs.com/&quot;&gt;handlebars&lt;/a&gt; as the templating engine for scaffolding. Knowledge of handlebars wouldn‚Äôt be necessary for the basic scaffolding needs but for more logic or conditionals, you would need to learn a bit of the handlebars syntax. For our case though, we only need to know the &lt;code class=&quot;language-text&quot;&gt;{{ data }}&lt;/code&gt; double syntax which is used for interpolating data in templates, and the &lt;code class=&quot;language-text&quot;&gt;{{ helperfn data }}&lt;/code&gt; helper syntax. Here, &lt;code class=&quot;language-text&quot;&gt;helperfn&lt;/code&gt; is a handlebars helper function that accepts &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; and returns a value. This is mostly how you would encapsulate logic within your templates. We have defined two helpers: &lt;code class=&quot;language-text&quot;&gt;slug&lt;/code&gt; which takes a string and transforms it to a human-readable, URL-compliant, kebab-case form (e.g. &lt;code class=&quot;language-text&quot;&gt;Hello world&lt;/code&gt; becomes &lt;code class=&quot;language-text&quot;&gt;hello-world&lt;/code&gt;), and &lt;code class=&quot;language-text&quot;&gt;yamlCommaToList&lt;/code&gt; which takes a string containing of list of values separated by commas, and returns a valid yaml array to represent the same data in yaml format (e.g. &lt;code class=&quot;language-text&quot;&gt;Hello, world, Here,I,come&lt;/code&gt; becomes &lt;code class=&quot;language-text&quot;&gt;[ Hello, world, Here, I, come ]&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Next we define the generator using &lt;code class=&quot;language-text&quot;&gt;plop.setGenerator()&lt;/code&gt;. We specify the name of the generator (used to specify which generator to initiate) and a configuration object. In the configuration, we specify the &lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt; of the generator, &lt;code class=&quot;language-text&quot;&gt;prompts&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;actions&lt;/code&gt;.
The &lt;strong&gt;prompts&lt;/strong&gt; define the list of different inputs we would ask from the user when scaffolding. These prompt configs are passed to &lt;a href=&quot;https://github.com/SBoudrias/Inquirer.js&quot;&gt;inquirer.js&lt;/a&gt; which plop uses to accept the user input. For a list of valid prompt options, you would need to check the docs for inquirer.js.
The &lt;strong&gt;actions&lt;/strong&gt; define the list of things that plop would do with the provided input. You can find a list of the predefined actions &lt;a href=&quot;https://plopjs.com/documentation/#built-in-actions&quot;&gt;here&lt;/a&gt; which do things like adding files, directories, modifying files, appending content to the end of files. You can also provide custom actions if you need them. Here, we have defined an action to add a new file in the specified path (notice we use the slug helper here to set the slug in the file path) and using a handlebars &lt;code class=&quot;language-text&quot;&gt;templateFile&lt;/code&gt; (we will look at the content of the template shortly). We also specified a &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; function. This function returns an object that is merged with the data provided by the user when rendering the template. Here we add the &lt;code class=&quot;language-text&quot;&gt;todayDate&lt;/code&gt; data for use in the template file.&lt;/p&gt;
&lt;p&gt;This is the content of the &lt;code class=&quot;language-text&quot;&gt;post-md.hbs&lt;/code&gt; used as the template for the newly generated post markdown file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; postTitle &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; todayDate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; yamlCommaToList tags &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;twitterHandle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{{ twitterHandle }}&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;

New blog post begins&lt;span class=&quot;token tag&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is pretty much everything you need. You can test out the plop scaffolding by running &lt;code class=&quot;language-text&quot;&gt;yarn plop&lt;/code&gt; at the root of your project.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;? Title of blog post: asdfghjk
? Twitter handle of author: imolorhe
? Specify list of tags: twitter, linkedin, social
‚úî  ++ /content/blog/asdfghjk/index.md&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This would run the locally installed plop package. When you run plop without specifying the &lt;code class=&quot;language-text&quot;&gt;--plopfile&lt;/code&gt; in the command, plop looks for the &lt;code class=&quot;language-text&quot;&gt;plopfile.js&lt;/code&gt; file at the root of the project, which is where we have added ours.
It should prompt you to provide the post title, author twitter handle, and list of tags. You should then see the generated file &lt;code class=&quot;language-text&quot;&gt;content/blog/asdfghjk/index.md&lt;/code&gt; in the project containing the rendered post template.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; asdfghjk
&lt;span class=&quot;token key atrule&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token datetime number&quot;&gt;2020-05-04T00:05:04.669Z&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; twitter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; linkedin&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; social &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;twitterHandle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;imolorhe&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;

New blog post begins&lt;span class=&quot;token tag&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For convenience and visibility of the feature, you can add a new script in the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; file to run plop. It is easier for people that are new to your project to know that you use plop for scaffolding if they see it in your list of package.json scripts.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;plop&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn plop&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;While I used plop to generate a simple file for a blog post, you can use plop for much more scaffolding with the different options available to you. The dynamic nature of the plop actions, allow for performing several other tasks, including async actions (like fetching some content from some API). Now you don‚Äôt have to keep repeating those tasks. Instead, you could spend about half an hour (or a bit more) setting up a simple plop-based process automation, sit back and enjoy! üòÑ&lt;/p&gt;
&lt;p&gt;‚úåüèæ&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Set up a blog with Gatsby, GitHub pages and GitHub actions]]></title><description><![CDATA[This is my first post on my new blog! How exciting! Creating this blog was an interesting process for me since I decided to use Gatsby for‚Ä¶]]></description><link>https://www.xkoji.dev/blog/set-up-a-blog-with-gatsby-github-pages-and-github-actions/</link><guid isPermaLink="false">https://www.xkoji.dev/blog/set-up-a-blog-with-gatsby-github-pages-and-github-actions/</guid><pubDate>Mon, 27 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This is my first post on my new blog! How exciting! Creating this blog was an interesting process for me since I decided to use Gatsby for it. While I had created a &lt;a href=&quot;https://www.gatsbyjs.org/packages/gatsby-plugin-altair-graphql/&quot;&gt;gatsby plugin&lt;/a&gt; before, I hadn‚Äôt actually built anything with gatsby. Starting this new blog was an opportunity to change that.&lt;/p&gt;
&lt;p&gt;For my setup, I decided to start off with hosting the blog on &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub pages&lt;/a&gt;. &lt;a href=&quot;https://github.com/features/actions&quot;&gt;GitHub actions&lt;/a&gt; made sense as the perfect tool for continuous deployment of the site, which also happened to be the first time I am using GitHub actions.&lt;/p&gt;
&lt;p&gt;After a couple of hours spent figuring out how to properly setup everything, I finally had the blog live and running at &lt;a href=&quot;https://xkojimedia.github.io/&quot;&gt;xkojimedia.github.io&lt;/a&gt; with a minimal template.&lt;/p&gt;
&lt;p&gt;Here I would go over how I was able to setup everything.&lt;/p&gt;
&lt;h3&gt;What is Gatsby and why should I be using it?&lt;/h3&gt;
&lt;p&gt;Quoting from their site,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Gatsby is a blazing fast modern site generator for React.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That covers the basic cases where you would want to use Gatsby. However, given the rich plugin ecosystem that is available to, and created by the Gatsby community, you can use Gatsby for a whole lot more use cases, like a blog, ecommerce platformm, etc. It is also built with the best practices in mind for the best user experience, including optional offline support for PWAs.&lt;/p&gt;
&lt;p&gt;The development experience while working with Gatsby is also great. There are several starter repos to help get you started quickly using Gatsby. The one I would be using is &lt;a href=&quot;https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/&quot;&gt;gatsby-starter-blog&lt;/a&gt;. I chose it since it is one of the most popular starters for creating blogs with Gatsby.&lt;/p&gt;
&lt;h3&gt;Setting things up&lt;/h3&gt;
&lt;p&gt;First, make sure that you have the latest version of node installed (Gatsby aims to support any node version that hasn‚Äôt reached it‚Äôs &lt;em&gt;End of Life&lt;/em&gt; status, but it is always safer to just use the latest version and not have to check if your node version is too old). &lt;/p&gt;
&lt;p&gt;Run &lt;code class=&quot;language-text&quot;&gt;node -v&lt;/code&gt; in a terminal to see which version of Node.js you have.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;node -v
v12.16.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, install the gatsby CLI package globally on your machine, to enable you run gatsby commands.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g gatsby-cli&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once gatsby-cli is installed, create a new gatsby project using the &lt;a href=&quot;https://github.com/gatsbyjs/gatsby-starter-blog&quot;&gt;gatsby-starter-blog&lt;/a&gt; starter, and call it whatever you would like. For the sake of this tutorial, we would call it &lt;strong&gt;my-blog&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=imolorhe data-host=localhost&gt;&lt;/span&gt;&lt;/span&gt;gatsby new my-blog https://github.com/gatsbyjs/gatsby-starter-blog&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This would create a &lt;strong&gt;my-blog&lt;/strong&gt; directory with the contents of the gatsby-starter-blog repo and install the dependencies.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: It removes the .git directory from the new project, so the project isn‚Äôt a repository pointing to the starter. So no need for you to look for that.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Once the process is completed, you can &lt;code class=&quot;language-text&quot;&gt;cd&lt;/code&gt; into the new directory and run &lt;code class=&quot;language-text&quot;&gt;npm run develop&lt;/code&gt; (&lt;code class=&quot;language-text&quot;&gt;yarn develop&lt;/code&gt;) or &lt;code class=&quot;language-text&quot;&gt;gatsby develop&lt;/code&gt;. I would recommend running &lt;code class=&quot;language-text&quot;&gt;npm run develop&lt;/code&gt; (or &lt;code class=&quot;language-text&quot;&gt;yarn develop&lt;/code&gt; using yarn) since this would use the local version of gatsby installed in the project, as opposed to using the globally installed gatsby command. This helps avoid issues with different versions of the gatsby binary used in different projects, so each project uses the gatsby version specific to the project.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: The starter comes with both &lt;code class=&quot;language-text&quot;&gt;package-lock.json&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;yarn.lock&lt;/code&gt; files. I assume this is to give users the option to choose between yarn and npm. I would recommend choosing one of the two package managers early on, and delete the lock file for the other package manager, to avoid confusion later in the future.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Running the develop script would compile the assets for the site, and watch the files for changes (Gatsby uses webpack underneath for bundling). At this point, open &lt;a href=&quot;http://localhost:8000&quot;&gt;http://localhost:8000&lt;/a&gt; to see the blog.&lt;/p&gt;
&lt;p&gt;Easy! Now you have a minimal blog setup that actually works. You can make changes to any of the .md files in &lt;code class=&quot;language-text&quot;&gt;content/blog&lt;/code&gt; directory, and you should see the changes reflected on the site. For further details on how to customize the blog, that is beyond the scope of this post. You can go through the README file that comes with the project, and also checkout the Gatsby docs.&lt;/p&gt;
&lt;h3&gt;Setting up GitHub Pages&lt;/h3&gt;
&lt;p&gt;GitHub allows you setup &lt;a href=&quot;https://help.github.com/en/github/working-with-github-pages/creating-a-github-pages-site&quot;&gt;user, organization and project sites&lt;/a&gt;. For project sites, you can choose to serve the files from the &lt;code class=&quot;language-text&quot;&gt;/docs&lt;/code&gt; folder of the repo of the project, the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch or the &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; branch of your project repo. For user/organization sites, you only have the options of serving the public files from the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; branch of a repo. You would need to create a repo called &lt;code class=&quot;language-text&quot;&gt;&amp;lt;user&amp;gt;.github.io&lt;/code&gt; I chose to host the blog as an organization site with the files served from the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch of the repo. For the gatsby project, the files being served are stored in the &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; directory after building the project. That is the part we would need in the github pages repo. We would need to have a repo for the project, and copy over the &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; content into the github pages repo.&lt;/p&gt;
&lt;p&gt;Now initialize the git repo in the project if you haven‚Äôt already done that already (using &lt;code class=&quot;language-text&quot;&gt;git init&lt;/code&gt;) and commit that into GitHub. Also create the user or organization site. Let‚Äôs assume the username is &lt;strong&gt;blogger&lt;/strong&gt;. You would create a repo called &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt;. Build the project using &lt;code class=&quot;language-text&quot;&gt;yarn build&lt;/code&gt; and copy the contents of the &lt;code class=&quot;language-text&quot;&gt;/public&lt;/code&gt; directory into the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo and commit it. If all goes well, you should be able to see the site live at &lt;a href=&quot;https://blogger.github.io&quot;&gt;https://blogger.github.io&lt;/a&gt; URL. That‚Äôs a milestone! üéâ&lt;/p&gt;
&lt;p&gt;Next thing we need to do is setup automatically copying the public assets into the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo.&lt;/p&gt;
&lt;h3&gt;Continuous delivery using GitHub Actions&lt;/h3&gt;
&lt;p&gt;GitHub actions is a new workflow automation tool provided by GitHub. It provides similar functionality available in CI/CD tools like Travis CI, appveyor, circle CI, etc. I would be using it since it is a free automation tool and integrates well with GitHub in a seamless and easy way.&lt;/p&gt;
&lt;p&gt;We would create a GitHub action workflow that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;checks out the repository in a workflow runner&lt;/li&gt;
&lt;li&gt;installs the node modules&lt;/li&gt;
&lt;li&gt;builds the package&lt;/li&gt;
&lt;li&gt;copies the public assets into the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We‚Äôd create the workflow in &lt;code class=&quot;language-text&quot;&gt;.github/workflows/pages.yml&lt;/code&gt; with the following content:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; GitHub Pages

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; master &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v1
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;12.x&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; yarn
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
        git config --global user.email &quot;&amp;lt;your-email-address&gt;&quot;
        git config --global user.name &quot;&amp;lt;your-name&gt;&quot;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; yarn deploy
      &lt;span class=&quot;token key atrule&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;PA_TOKEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.PA_TOKEN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;CI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are a number of things going on here, so let‚Äôs break it down.&lt;/p&gt;
&lt;p&gt;First we name the workflow as &lt;code class=&quot;language-text&quot;&gt;GitHub Pages&lt;/code&gt;.
We specify that the workflow should be run whenever any commit is pushed to the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch.
A &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt; job is specified to run on the latest ubuntu VM with the following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;uses the &lt;a href=&quot;https://github.com/marketplace/actions/checkout&quot;&gt;Checkout&lt;/a&gt; GitHub action to checkout the repo in the workflow&lt;/li&gt;
&lt;li&gt;uses the &lt;a href=&quot;https://github.com/marketplace/actions/setup-node-js-environment&quot;&gt;Setup Node.js environment&lt;/a&gt; GitHub action to get the workflow environment setup for Node.js using the latest node 12 version.&lt;/li&gt;
&lt;li&gt;run &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt; to install the node modules&lt;/li&gt;
&lt;li&gt;configure git to be able to push to the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo&lt;/li&gt;
&lt;li&gt;run &lt;code class=&quot;language-text&quot;&gt;yarn deploy&lt;/code&gt; script (which we would define later) which will build and deploy the project to the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo. Specify &lt;code class=&quot;language-text&quot;&gt;PA_TOKEN&lt;/code&gt; environment variable that would be used by the &lt;code class=&quot;language-text&quot;&gt;deploy&lt;/code&gt; script to authenticate pushing to the repo. The &lt;code class=&quot;language-text&quot;&gt;PA_TOKEN&lt;/code&gt; is your &lt;a href=&quot;https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line&quot;&gt;personal access token&lt;/a&gt; with permission to write to the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo. To create a personal access token, go to your &lt;a href=&quot;https://github.com/settings/tokens/new&quot;&gt;tokens settings&lt;/a&gt; page and select the &lt;code class=&quot;language-text&quot;&gt;repo&lt;/code&gt; scope. After creating the personal access token, set the token as the &lt;code class=&quot;language-text&quot;&gt;PA_TOKEN&lt;/code&gt; secret in the project repo by going to the repo &lt;code class=&quot;language-text&quot;&gt;Settings -&amp;gt; Secrets -&amp;gt; Add a new secret&lt;/code&gt;. Now you can access the secret in the workflow using &lt;code class=&quot;language-text&quot;&gt;${{ secrets.PA_TOKEN }}&lt;/code&gt;. More information about secrets in workflows can be found &lt;a href=&quot;https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets&quot;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the deploy script, we would use the &lt;a href=&quot;https://www.npmjs.com/package/gh-pages&quot;&gt;gh-pages&lt;/a&gt; npm package to push the github pages assets into the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo using &lt;code class=&quot;language-text&quot;&gt;gh-pages -d public -b master -r &amp;quot;https://&amp;lt;your-username&amp;gt;:$PA_TOKEN@github.com/blogger/blogger.github.io.git&amp;quot;&lt;/code&gt;. This command specifies the &lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; directory as the source of the github pages, specifies the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch, and specifies the remote repo as &lt;code class=&quot;language-text&quot;&gt;https://&amp;lt;your-username&amp;gt;:$PA_TOKEN@github.com/blogger/blogger.github.io.git&lt;/code&gt;. The URL specifies the GitHub HTTP URL along with the username and password used for the authentication of the git operations. You specify your username and the &lt;code class=&quot;language-text&quot;&gt;PA_TOKEN&lt;/code&gt; variable replaces your password. &lt;em&gt;You should never use your actual password in automation scripts. Always make use of access tokens that have the scope you need for that script.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Your deploy script in the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; file would look something like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ...
    &lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby build &amp;amp;&amp;amp; gh-pages -d public -b master -r \&quot;https://blogger:$PA_TOKEN@github.com/blogger/blogger.github.io.git\&quot;&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That‚Äôs it! Now you push your changes to GitHub, your GitHub action workflow should pick up your changes and run the workflow. You can find the running GitHub actions in the Actions menu in the project repo.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 10.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAaElEQVQI1z2O2QoDMQwD9/8/tk3j+MrRqZeFPgijQTK65tpob0h7IRaP9JbzaU57OyLlhzKKdVHUiqk9dxgeWZpETq5zvmQ44Yp7FEyiAqMKQ5LeAtXE3MkqWD3JOf/Z26+9OeewatwPDgqbeOmci30AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;github actions menu&quot;
        title=&quot;github actions menu&quot;
        src=&quot;/static/af52c53ca5744fbfa9cb4808875308fd/c1b63/github-actions-menu.png&quot;
        srcset=&quot;/static/af52c53ca5744fbfa9cb4808875308fd/5a46d/github-actions-menu.png 300w,
/static/af52c53ca5744fbfa9cb4808875308fd/0a47e/github-actions-menu.png 600w,
/static/af52c53ca5744fbfa9cb4808875308fd/c1b63/github-actions-menu.png 1200w,
/static/af52c53ca5744fbfa9cb4808875308fd/d61c2/github-actions-menu.png 1800w,
/static/af52c53ca5744fbfa9cb4808875308fd/7da7d/github-actions-menu.png 2120w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Once the action workflow is completed, you should see the new public assets in the &lt;code class=&quot;language-text&quot;&gt;blogger.github.io&lt;/code&gt; repo.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;For a simple blog, Gatsby works well with GitHub Pages for hosting and GitHub actions for automating the workflow. For more dynamic content and sites, you would need some other hosting platform as GitHub Pages handles hosting static pages. However, you can still make use of Gatsby and GitHub actions for more dynamic sites.&lt;/p&gt;</content:encoded></item></channel></rss>